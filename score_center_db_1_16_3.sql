# ************************************************************
# Sequel Pro SQL dump
# Version 4541
#
# http://www.sequelpro.com/
# https://github.com/sequelpro/sequelpro
#
# Host: 127.0.0.1 (MySQL 5.5.5-10.1.9-MariaDB)
# Database: score_center_db
# Generation Time: 2016-09-05 20:24:19 +0000
#
# @package: Tournament Score Center (TSC) - Tournament scoring web application.
# @version: 1.16.3, 12.07.2016
# @author: Preston Frazier http://scorecenter.prestonsproductions.com/index.php 
# @license: http://www.gnu.org/licenses/gpl-3.0.en.html GPLv3
# ************************************************************

INSERT INTO REF_DATA (DOMAIN_CODE, REF_DATA_CODE, PARENT_REF_DATA_CODE, SORT_ORDER, DISPLAY_TEXT) VALUES ('ROLE','COACH', null, 3, 'Coach');

INSERT INTO EVENT (NAME,COMMENTS, SCORE_SYSTEM_CODE, CREATED_BY, OFFICIAL_EVENT_FLAG) VALUES ('Fast Facts','','HIGHRAW',1,1);
INSERT INTO EVENT (NAME,COMMENTS, SCORE_SYSTEM_CODE, CREATED_BY, OFFICIAL_EVENT_FLAG) VALUES ('Hovercraft','','HIGHRAW',1,1);
INSERT INTO EVENT (NAME,COMMENTS, SCORE_SYSTEM_CODE, CREATED_BY, OFFICIAL_EVENT_FLAG) VALUES ('Microbe Mission','','HIGHRAW',1,1);
INSERT INTO EVENT (NAME,COMMENTS, SCORE_SYSTEM_CODE, CREATED_BY, OFFICIAL_EVENT_FLAG) VALUES ('Optics','','HIGHRAW',1,1);
INSERT INTO EVENT (NAME,COMMENTS, SCORE_SYSTEM_CODE, CREATED_BY, OFFICIAL_EVENT_FLAG) VALUES ('Towers','','HIGHRAWTIER',1,1);
INSERT INTO EVENT (NAME,COMMENTS, SCORE_SYSTEM_CODE, CREATED_BY, OFFICIAL_EVENT_FLAG) VALUES ('Ecology','','HIGHRAW',1,1);
INSERT INTO EVENT (NAME,COMMENTS, SCORE_SYSTEM_CODE, CREATED_BY, OFFICIAL_EVENT_FLAG) VALUES ('Helicopters','','HIGHRAWTIER',1,1);
INSERT INTO EVENT (NAME,COMMENTS, SCORE_SYSTEM_CODE, CREATED_BY, OFFICIAL_EVENT_FLAG) VALUES ('Materials Science','','HIGHRAW',1,1);
INSERT INTO EVENT (NAME,COMMENTS, SCORE_SYSTEM_CODE, CREATED_BY, OFFICIAL_EVENT_FLAG) VALUES ('Remote Sensing','','HIGHRAW',1,1);

ALTER TABLE TEAM MODIFY TEAM_ID INT(11) SIGNED;
ALTER TABLE TOURNAMENT MODIFY TOURNAMENT_ID INT(11) SIGNED;

CREATE TABLE TEAM_COACH (
TEAM_COACH_ID INT NOT NULL AUTO_INCREMENT,
TEAM_ID INT NOT NULL,
USER_ID INT NOT NULL, 
PRIMARY KEY (TEAM_COACH_ID),
CONSTRAINT TEAM_ID_FK FOREIGN KEY (`TEAM_ID`) REFERENCES TEAM(`TEAM_ID`),
CONSTRAINT USER_ID_FK2 FOREIGN KEY (`USER_ID`) REFERENCES USER(`USER_ID`)
) ENGINE InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `TOURNAMENT_SCHEDULE` (
  `TOURNAMENT_SCHEDULE_ID` int(11) NOT NULL,
  `TOURNAMENT_ID` int(11) NOT NULL,
  `START_TIME` datetime DEFAULT NULL,
  `END_TIME` datetime DEFAULT NULL,
  `OPEN_FLAG` int(11) DEFAULT NULL,
  PRIMARY KEY (`TOURNAMENT_SCHEDULE_ID`),
  KEY `TOURNAMENT_ID` (`TOURNAMENT_ID`),
  CONSTRAINT `tournament_schedule_ibfk_1` FOREIGN KEY (`TOURNAMENT_ID`) REFERENCES `TOURNAMENT` (`TOURNAMENT_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `SCHEDULE_PERIOD` (
  `SCHEDULE_PERIOD_ID` int(11) NOT NULL,
  `TOURNAMENT_SCHEDULE_ID` int(11) NOT NULL,
  `START_TIME` datetime DEFAULT NULL,
  `END_TIME` datetime DEFAULT NULL,
  `PERIOD_NUMBER` VARCHAR(30) DEFAULT NULL,
  `PERIOD_INTERVAL_COUNT` int(11) DEFAULT NULL,
  PRIMARY KEY (`SCHEDULE_PERIOD_ID`),
  KEY `TOURNAMENT_SCHEDULE_ID` (`TOURNAMENT_SCHEDULE_ID`),
  CONSTRAINT `schedule_period_ibfk_1` FOREIGN KEY (`TOURNAMENT_SCHEDULE_ID`) REFERENCES `TOURNAMENT_SCHEDULE` (`TOURNAMENT_SCHEDULE_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `SCHEDULE_EVENT` (
  `SCHEDULE_EVENT_ID` int(11) NOT NULL AUTO_INCREMENT,
  `TOURNAMNET_SCHEDULE_ID` int(11) DEFAULT NULL,
  `TOURN_EVENT_ID` int(11) DEFAULT NULL,
  `ALLOW_SCHEDULE_FLAG` int(11) DEFAULT NULL,
  `ALL_DAY_FLAG` int(11) DEFAULT NULL,
  `PERIOD_LENGTH` int(11) DEFAULT NULL,
  `PERIOD_INTERVAL` int(11) DEFAULT NULL,
  `PERIOD_TEAM_LIMIT` int(11) DEFAULT NULL,
  `EVENT_START_TIME` datetime DEFAULT NULL,
  PRIMARY KEY (`SCHEDULE_EVENT_ID`),
  KEY `TOURNAMNET_SCHEDULE_ID` (`TOURNAMNET_SCHEDULE_ID`),
  CONSTRAINT `schedule_event_ibfk_1` FOREIGN KEY (`TOURNAMNET_SCHEDULE_ID`) REFERENCES `TOURNAMENT_SCHEDULE` (`TOURNAMENT_SCHEDULE_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `SCHEDULE_EVENT_PERIOD` (
  `SCHEDULE_EVENT_PERIOD_ID` int(11) NOT NULL AUTO_INCREMENT,
  `SCHEDULE_EVENT_ID` int(11) DEFAULT NULL,
  `PERIOD_TEAM_LIMIT` int(11) DEFAULT NULL,
  `PERIOD_START_TIME` datetime DEFAULT NULL,
  `PERIOD_END_TIME` datetime DEFAULT NULL,
  `PERIOD_INTERVAL` int(11) DEFAULT NULL,
  `PERIOD_NUMBER` varchar(30) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`SCHEDULE_EVENT_PERIOD_ID`),
  KEY `SCHEDULE_EVENT_ID` (`SCHEDULE_EVENT_ID`),
  CONSTRAINT `schedule_event_period_ibfk_1` FOREIGN KEY (`SCHEDULE_EVENT_ID`) REFERENCES `SCHEDULE_EVENT` (`SCHEDULE_EVENT_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `SCHEDULE_TEAM` (
  `SCHEDULE_TEAM_ID` int(11) NOT NULL AUTO_INCREMENT,
  `SCHEDULE_EVENT_PERIOD_ID` int(11) DEFAULT NULL,
  `TOURN_TEAM_ID` int(11) DEFAULT NULL,
  PRIMARY KEY (`SCHEDULE_TEAM_ID`),
  KEY `SCHEDULE_EVENT_PERIOD_ID` (`SCHEDULE_EVENT_PERIOD_ID`),
  CONSTRAINT `schedule_team_ibfk_1` FOREIGN KEY (`SCHEDULE_EVENT_PERIOD_ID`) REFERENCES `SCHEDULE_EVENT_PERIOD` (`SCHEDULE_EVENT_PERIOD_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

